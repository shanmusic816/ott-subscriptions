<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Payment</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 40px;
}
.box {
  max-width: 400px;
  background: #fff;
  padding: 25px;
  margin: auto;
  border-radius: 10px;
  text-align: center;
}
.amount {
  font-size: 22px;
  color: red;
  margin: 15px 0;
}
.pay-btn {
  display: block;
  margin-top: 15px;
  padding: 12px;
  background: green;
  color: #fff;
  border-radius: 6px;
  text-decoration: none;
  font-size: 16px;
}
.qr {
  margin-top: 20px;
}
.qr img {
  width: 200px;
}
.note {
  font-size: 13px;
  color: #555;
  margin-top: 10px;
}
.done-btn {
  margin-top: 20px;
  padding: 12px;
  width: 100%;
  background: #000;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="box">
  <h2 id="product">Product</h2>

  <div class="amount">
    Amount: â‚¹<span id="price">0</span>
  </div>

  <a id="upiBtn" class="pay-btn">Pay via UPI</a>

  <div class="qr">
    <img id="qrImg">
    <div class="note">Scan QR from any UPI app</div>
  </div>

  <button class="done-btn" onclick="paid()">I Have Paid</button>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const product = params.get("product");
const price = params.get("price");

document.getElementById("product").innerText = product;
document.getElementById("price").innerText = price;

const upiId = "shanmusic816@okhdfcbank";
const name = "GlitchXshan Store";

const upiLink =
  `upi://pay?pa=${upiId}&pn=${encodeURIComponent(name)}&am=${price}&cu=INR`;

document.getElementById("upiBtn").href = upiLink;

document.getElementById("qrImg").src =
  "https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" +
  encodeURIComponent(upiLink);

function paid() {
  const now = new Date();
  const datetime = now.toLocaleString();

  window.location.href =
    "success.html?product=" + encodeURIComponent(product) +
    "&price=" + price +
    "&time=" + encodeURIComponent(datetime);
}
</script>

</body>
</html>