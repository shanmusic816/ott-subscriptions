<!DOCTYPE html>
<html>
<head>
<title>Payment</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<h2>Payment</h2>
<p>Order ID: <span id="oid"></span></p>
<p>Total Amount: ₹<span id="amt"></span></p>

<button onclick="openWhatsApp()">I Have Paid</button>

<script>
const orderId="GX-"+Math.floor(100000+Math.random()*900000);
document.getElementById("oid").innerText=orderId;

const buyNow=JSON.parse(localStorage.getItem("buyNowItem"));
const cart=JSON.parse(localStorage.getItem("cart"))||[];

let items=[];
let total=0;

if(buyNow){
  items.push(buyNow.name+" x"+buyNow.qty);
  total=buyNow.price*buyNow.qty;
}else{
  cart.forEach(i=>{
    items.push(i.name+" x"+i.qty);
    total+=i.price*i.qty;
  });
}

document.getElementById("amt").innerText=total;

const list=items.map((i,n)=>(n+1)+". "+i).join("\n");

function openWhatsApp(){
  const msg=
"Payment Done\n\n"+
"Order ID: "+orderId+"\n"+
"Items:\n"+list+"\n\n"+
"Amount: ₹"+total+"\n\n"+
"UPI Txn ID:\nScreenshot attached.";

  window.location.href=
"https://wa.me/918102549120?text="+encodeURIComponent(msg);
}
</script>

</body>
</html>