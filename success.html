<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Payment Submitted</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 40px;
  text-align: center;
}
.box {
  background: #fff;
  padding: 30px;
  max-width: 420px;
  margin: auto;
  border-radius: 12px;
}
h2 {
  color: green;
}
.order {
  margin-top: 10px;
  font-weight: bold;
  font-size: 16px;
}
.copy-btn {
  margin-top: 8px;
  padding: 6px 12px;
  font-size: 13px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.info {
  margin-top: 15px;
  font-size: 15px;
  line-height: 1.6;
}
.note {
  font-size: 13px;
  color: #555;
  margin-top: 12px;
}
.wa-btn {
  display: block;
  margin-top: 22px;
  padding: 14px;
  background: #25D366;
  color: #fff;
  text-decoration: none;
  border-radius: 6px;
  font-size: 16px;
}
</style>
</head>

<body>

<div class="box">
  <h2>✅ Payment Submitted</h2>

  <div class="order">
    Order ID: <span id="orderId"></span><br>
    <button class="copy-btn" onclick="copyOrderId()">Copy Order ID</button>
  </div>

  <div class="info">
    <strong>Product:</strong> <span id="product"></span><br>
    <strong>Amount:</strong> ₹<span id="price"></span><br>
    <strong>Date:</strong> <span id="date"></span>
  </div>

  <div class="note">
    ⚠️ Order ID does not confirm payment.<br>
    Delivery will be done after UPI verification only.
  </div>

  <a id="waBtn" class="wa-btn" target="_blank">
    Send Details on WhatsApp
  </a>
</div>

<script>
/* GET DATA */
const params = new URLSearchParams(window.location.search);
const product = params.get("product") || "Unknown Product";
const price = params.get("price") || "0";

/* APP CODE MAP (FUTURE-PROOF) */
const appCodes = {
  "Prime Video": "PV",
  "Netflix": "NF",
  "Sony LIV": "SL",
  "Jio Hotstar": "JH",
  "ChatGPT Plus": "CG",
  "Gemini AI Pro": "GM",
  "Adobe Creative Cloud": "AD",
  "Perplexity AI Pro": "PP"
};

/* FIND APP CODE */
let appCode = "OT";
for (const key in appCodes) {
  if (product.includes(key)) {
    appCode = appCodes[key];
    break;
  }
}

/* DATE DDMMYY */
const now = new Date();
const dd = String(now.getDate()).padStart(2, "0");
const mm = String(now.getMonth() + 1).padStart(2, "0");
const yy = String(now.getFullYear()).slice(-2);
const displayDate = `${dd}/${mm}/20${yy}`;

/* ORDER ID */
const orderId =
  "GX-" +
  appCode + "-" +
  dd + mm + yy + "-" +
  Math.floor(1000 + Math.random() * 9000);

/* SHOW */
document.getElementById("orderId").innerText = orderId;
document.getElementById("product").innerText = product;
document.getElementById("price").innerText = price;
document.getElementById("date").innerText = displayDate;

/* COPY FUNCTION */
function copyOrderId() {
  navigator.clipboard.writeText(orderId).then(() => {
    alert("Order ID copied: " + orderId);
  });
}

/* WHATSAPP */
const phone = "918102549120"; // apna number (no +, no space)
const msg =
  "Hi, I have completed the payment.\n\n" +
  "Order ID: " + orderId + "\n" +
  "Product: " + product + "\n" +
  "Amount: ₹" + price + "\n" +
  "Date: " + displayDate + "\n\n" +
  "Please verify my payment.";

document.getElementById("waBtn").href =
  "https://wa.me/" + phone + "?text=" + encodeURIComponent(msg);
</script>

</body>
</html>
